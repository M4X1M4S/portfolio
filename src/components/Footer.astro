---
// Footer.astro - Enhanced version with TypeScript types and improved HTML
---

<footer role='contentinfo' aria-label='Site footer'>
  <div class='footer-gradient' aria-hidden='true'></div>

  <div class='footer-content'>
    <section class='footer-left' aria-labelledby='footer-tagline'>
      <h2 id='footer-tagline' class='footer-tagline'>I do all that and more.</h2>

      <a
        href='https://cal.com/soham-sarkar-work'
        class='work-with-me'
        aria-describedby='cta-description'
      >
        Work with me!
      </a>
      <span id='cta-description' class='visually-hidden'>Schedule a consultation call</span>

      <address class='location-info' aria-label='Location information'>
        <div class='coordinates' aria-label='Geographic coordinates'>
          <div class='coordinate-line'>
            <span class='coordinate-value' data-target='12.9716' aria-label='Latitude'>0.0000</span
            >° N
          </div>
          <div class='coordinate-line'>
            <span class='coordinate-value' data-target='77.5946' aria-label='Longitude'>0.0000</span
            >° E
          </div>
        </div>
        <div class='location-text'>
          <p>BASED IN BLR, IN<br />WORKING WORLDWIDE</p>
        </div>
      </address>
    </section>

    <section class='footer-right' aria-labelledby='social-heading'>
      <h3 id='social-heading' class='visually-hidden'>Social Media Links</h3>
      <nav class='social-links' aria-label='Social media profiles'>
        <a
          href='https://sohamsarkar.work'
          target='_blank'
          rel='noopener noreferrer'
          aria-label='Visit sohamsarkar.work (opens in new tab)'
          class='social-link'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            aria-hidden='true'
            class='social-icon'
          >
            <path
              d='M10 1.875a8.125 8.125 0 1 0 0 16.25c1.68 0 3.445-.506 4.721-1.354a.625.625 0 0 0-.692-1.041c-1.06.706-2.606 1.145-4.029 1.145A6.875 6.875 0 1 1 16.875 10c0 2.066-.85 2.5-1.562 2.5s-1.563-.434-1.563-2.5V6.875a.625.625 0 1 0-1.25 0v.333a3.75 3.75 0 1 0 .463 5.086c.469.937 1.278 1.456 2.35 1.456 1.76 0 2.812-1.402 2.812-3.75A8.133 8.133 0 0 0 10 1.875M10 12.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5'
              fill='currentColor'></path>
          </svg>
          <span class='social-text'>sohamsarkar.work</span>
        </a>

        <a
          href='https://github.com/sohhamm'
          target='_blank'
          rel='noopener noreferrer'
          aria-label='GitHub profile (opens in new tab)'
          class='social-link'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            aria-hidden='true'
            class='social-icon'
          >
            <g clip-path='url(#github-clip)'>
              <path
                d='M16.274 5.913a4.67 4.67 0 0 0-.42-3.725.63.63 0 0 0-.541-.313 4.67 4.67 0 0 0-3.75 1.875H9.687a4.67 4.67 0 0 0-3.75-1.875.63.63 0 0 0-.54.313 4.67 4.67 0 0 0-.421 3.725 4.54 4.54 0 0 0-.601 2.212v.625a4.38 4.38 0 0 0 3.784 4.334A3.1 3.1 0 0 0 7.5 15v.625H5.625A1.875 1.875 0 0 1 3.75 13.75a3.125 3.125 0 0 0-3.125-3.125.625.625 0 0 0 0 1.25A1.875 1.875 0 0 1 2.5 13.75a3.125 3.125 0 0 0 3.125 3.125H7.5v1.25a.625.625 0 0 0 1.25 0V15a1.875 1.875 0 1 1 3.75 0v3.125a.625.625 0 1 0 1.25 0V15c0-.694-.232-1.37-.66-1.916a4.38 4.38 0 0 0 3.785-4.334v-.625a4.54 4.54 0 0 0-.6-2.212m-.649 2.837a3.125 3.125 0 0 1-3.125 3.125H8.75A3.125 3.125 0 0 1 5.625 8.75v-.625a3.26 3.26 0 0 1 .54-1.756.63.63 0 0 0 .085-.601 3.42 3.42 0 0 1 .062-2.623 3.43 3.43 0 0 1 2.525 1.567A.63.63 0 0 0 9.36 5h2.527a.63.63 0 0 0 .527-.288 3.43 3.43 0 0 1 2.525-1.567A3.42 3.42 0 0 1 15 5.768a.63.63 0 0 0 .078.598 3.26 3.26 0 0 1 .547 1.759z'
                fill='currentColor'></path>
            </g>
            <defs>
              <clipPath id='github-clip'>
                <path fill='currentColor' d='M0 0h20v20H0z'></path>
              </clipPath>
            </defs>
          </svg>
          <span class='social-text'>@sohhamm</span>
        </a>

        <a
          href='https://linkedin.com/in/sohhamm'
          target='_blank'
          rel='noopener noreferrer'
          aria-label='LinkedIn profile (opens in new tab)'
          class='social-link'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            aria-hidden='true'
            class='social-icon'
          >
            <path
              d='M16.875 1.875H3.125a1.25 1.25 0 0 0-1.25 1.25v13.75a1.25 1.25 0 0 0 1.25 1.25h13.75a1.25 1.25 0 0 0 1.25-1.25V3.125a1.25 1.25 0 0 0-1.25-1.25m0 15H3.125V3.125h13.75zM7.5 8.75v5a.625.625 0 1 1-1.25 0v-5a.625.625 0 0 1 1.25 0m6.875 2.188v2.812a.624.624 0 1 1-1.25 0v-2.812a1.563 1.563 0 1 0-3.125 0v2.812a.625.625 0 1 1-1.25 0v-5a.625.625 0 0 1 1.234-.14 2.812 2.812 0 0 1 4.391 2.328M7.813 6.562a.937.937 0 1 1-1.875 0 .937.937 0 0 1 1.875 0'
              fill='currentColor'></path>
          </svg>
          <span class='social-text'>@sohhamm</span>
        </a>

        <a
          href='https://twitter.com/sohamsarkartech'
          target='_blank'
          rel='noopener noreferrer'
          aria-label='Twitter profile (opens in new tab)'
          class='social-link'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            aria-hidden='true'
            class='social-icon'
          >
            <path
              d='m16.778 16.54-4.891-7.686 4.826-5.309a.625.625 0 0 0-.925-.84L11.19 7.76 8.027 2.79A.63.63 0 0 0 7.5 2.5H3.75a.625.625 0 0 0-.527.96l4.89 7.686-4.825 5.313a.624.624 0 1 0 .925.84l4.597-5.056 3.163 4.971a.63.63 0 0 0 .527.286h3.75a.624.624 0 0 0 .527-.96m-3.935-.29L4.888 3.75h2.266l7.958 12.5z'
              fill='currentColor'></path>
          </svg>
          <span class='social-text'>@sohamsarkartech</span>
        </a>

        <a
          href='https://instagram.com/codebandit'
          target='_blank'
          rel='noopener noreferrer'
          aria-label='Instagram profile (opens in new tab)'
          class='social-link'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            aria-hidden='true'
            class='social-icon'
          >
            <path
              d='M10 6.25a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5m0 6.25a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m3.75-10.625h-7.5A4.38 4.38 0 0 0 1.875 6.25v7.5a4.38 4.38 0 0 0 4.375 4.375h7.5a4.38 4.38 0 0 0 4.375-4.375v-7.5a4.38 4.38 0 0 0-4.375-4.375m3.125 11.875a3.125 3.125 0 0 1-3.125 3.125h-7.5a3.125 3.125 0 0 1-3.125-3.125v-7.5A3.125 3.125 0 0 1 6.25 3.125h7.5a3.125 3.125 0 0 1 3.125 3.125zM15 5.938a.938.938 0 1 1-1.875 0 .938.938 0 0 1 1.875 0'
              fill='currentColor'></path>
          </svg>
          <span class='social-text'>@codebandit</span>
        </a>
      </nav>
    </section>
  </div>

  <nav class='footer-nav' aria-label='Footer navigation'>
    <a href='/' aria-current='false'>WORK</a>
    <a href='/about'>ABOUT</a>
    <a href='/blog'>BLOG</a>
  </nav>
</footer>

<!-- TypeScript Types and Interfaces -->
<script>
  // Type definitions for the footer animation system
  interface NumberTickerOptions {
    duration?: number
    decimals?: number
    delay?: number
  }

  interface CoordinateElement extends HTMLElement {
    dataset: {
      target: string
    }
  }

  interface AnimationConfig {
    threshold: number
    rootMargin: string
    duration: number
    staggerDelay: number
  }

  // Enhanced NumberTicker class with proper typing
  class NumberTicker {
    private element: CoordinateElement
    private targetValue: number
    private duration: number
    private decimals: number
    private delay: number
    private startValue: number = 0
    private hasAnimated: boolean = false
    private animationId: number | null = null

    constructor(
      element: CoordinateElement,
      targetValue: string,
      options: NumberTickerOptions = {},
    ) {
      this.element = element
      this.targetValue = parseFloat(targetValue)
      this.duration = options.duration || 2000
      this.decimals = options.decimals || 4
      this.delay = options.delay || 0

      // Validate target value
      if (isNaN(this.targetValue)) {
        console.warn(`Invalid target value: ${targetValue}`)
        this.targetValue = 0
      }
    }

    animate(): void {
      if (this.hasAnimated) return
      this.hasAnimated = true

      setTimeout(() => {
        const startTime = performance.now()
        const startValue = this.startValue
        const endValue = this.targetValue
        const difference = endValue - startValue

        const updateNumber = (currentTime: number): void => {
          const elapsed = currentTime - startTime
          const progress = Math.min(elapsed / this.duration, 1)

          // Easing function (ease-out cubic)
          const easeProgress = 1 - Math.pow(1 - progress, 3)
          const currentValue = startValue + difference * easeProgress

          this.element.textContent = currentValue.toFixed(this.decimals)

          if (progress < 1) {
            this.animationId = requestAnimationFrame(updateNumber)
          } else {
            this.element.textContent = endValue.toFixed(this.decimals)
            this.animationId = null
          }
        }

        this.animationId = requestAnimationFrame(updateNumber)
      }, this.delay)
    }

    reset(): void {
      this.hasAnimated = false
      this.element.textContent = this.startValue.toFixed(this.decimals)

      if (this.animationId) {
        cancelAnimationFrame(this.animationId)
        this.animationId = null
      }
    }

    destroy(): void {
      this.reset()
    }
  }

  // Enhanced FooterAnimationController with proper typing
  class FooterAnimationController {
    private coordinateElements: NodeListOf<CoordinateElement>
    private tickers: NumberTicker[] = []
    private observer: IntersectionObserver | null = null
    private config: AnimationConfig

    constructor(config: Partial<AnimationConfig> = {}) {
      this.config = {
        threshold: 0.3,
        rootMargin: '0px 0px -50px 0px',
        duration: 2500,
        staggerDelay: 300,
        ...config,
      }

      this.coordinateElements = document.querySelectorAll(
        '.coordinate-value',
      ) as NodeListOf<CoordinateElement>
      this.init()
    }

    private init(): void {
      this.setupTickers()
      this.setupIntersectionObserver()
      this.setupCleanup()
    }

    private setupTickers(): void {
      this.coordinateElements.forEach((element, index) => {
        const targetValue = element.dataset.target

        if (!targetValue) {
          console.warn('Coordinate element missing data-target attribute', element)
          return
        }

        const ticker = new NumberTicker(element, targetValue, {
          duration: this.config.duration,
          decimals: 4,
          delay: index * this.config.staggerDelay,
        })

        this.tickers.push(ticker)
      })
    }

    private setupIntersectionObserver(): void {
      const options: IntersectionObserverInit = {
        threshold: this.config.threshold,
        rootMargin: this.config.rootMargin,
      }

      this.observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            this.startAnimation()
            // Disconnect after first animation to prevent re-triggering
            this.observer?.unobserve(entry.target)
          }
        })
      }, options)

      const footer = document.querySelector('footer')
      if (footer) {
        this.observer.observe(footer)
      } else {
        console.warn('Footer element not found')
      }
    }

    private setupCleanup(): void {
      // Clean up on page unload
      window.addEventListener('beforeunload', () => {
        this.destroy()
      })

      // Handle visibility changes
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          this.pause()
        } else {
          this.resume()
        }
      })
    }

    private startAnimation(): void {
      this.tickers.forEach(ticker => ticker.animate())
    }

    private pause(): void {
      // Could implement pause functionality if needed
    }

    private resume(): void {
      // Could implement resume functionality if needed
    }

    public reset(): void {
      this.tickers.forEach(ticker => ticker.reset())
    }

    public destroy(): void {
      this.tickers.forEach(ticker => ticker.destroy())
      this.tickers = []

      if (this.observer) {
        this.observer.disconnect()
        this.observer = null
      }
    }
  }

  // Error handling wrapper
  function initializeFooterAnimations(): void {
    try {
      new FooterAnimationController()
    } catch (error) {
      console.error('Failed to initialize footer animations:', error)
    }
  }

  // Initialize when DOM is loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeFooterAnimations)
  } else {
    initializeFooterAnimations()
  }
</script>

<style>
  /* CSS Custom Properties */
  :root {
    --footer-bg-color: #000;
    --footer-text-color: #fff;
    --footer-text-secondary: #7f7f7f;
    --footer-hover-bg: rgba(255, 255, 255, 0.1);
    --footer-transition: all 0.3s ease;
    --footer-border-radius: 12px;
    --footer-spacing-xs: 0.25rem;
    --footer-spacing-sm: 0.5rem;
    --footer-spacing-md: 1rem;
    --footer-spacing-lg: 2rem;
    --footer-spacing-xl: 4rem;
    --footer-focus-color: #fff;
    --footer-focus-width: 2px;
  }

  /* Accessibility - Screen reader only content */
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Main Footer Styles */
  footer {
    background-color: var(--footer-bg-color);
    color: var(--footer-text-color);
    padding: var(--footer-spacing-xl) var(--footer-spacing-lg) 0;
    font-family: 'Victor Mono', monospace;
    position: relative;
    overflow: hidden;
    border-radius: var(--footer-border-radius);
  }

  /* Gradient Line */
  .footer-gradient {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(
      90deg,
      rgba(255, 255, 255, 0) 0%,
      var(--footer-text-color) 50%,
      rgba(255, 255, 255, 0) 100%
    );
  }

  /* Layout */
  .footer-content {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--footer-spacing-lg);
    gap: var(--footer-spacing-lg);
  }

  .footer-left {
    flex: 1;
  }

  .footer-right {
    flex-shrink: 0;
  }

  /* Typography */
  .footer-tagline {
    color: var(--footer-text-color);
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-style: italic;
    font-weight: 400;
    line-height: 1;
    letter-spacing: -0.08em;
    margin: 0 0 var(--footer-spacing-md) 0;
  }

  /* Work With Me Button */
  .work-with-me {
    display: inline-block;
    padding: var(--footer-spacing-sm) var(--footer-spacing-md);
    border: 1px solid var(--footer-text-color);
    border-radius: 2rem;
    text-decoration: none;
    color: var(--footer-text-color);
    font-size: var(--footer-spacing-md);
    transition: var(--footer-transition);
    margin-bottom: var(--footer-spacing-md);
  }

  .work-with-me:hover {
    background-color: var(--footer-hover-bg);
    transform: translateY(-2px);
  }

  .work-with-me:focus-visible {
    outline: var(--footer-focus-width) solid var(--footer-focus-color);
    outline-offset: 2px;
  }

  /* Location Info */
  .location-info {
    display: flex;
    gap: 2.5rem;
    align-items: flex-start;
    margin-top: 3.75rem;
    font-style: normal;
  }

  .coordinates {
    font-family: 'Victor Mono', monospace;
    font-variant-numeric: tabular-nums;
    letter-spacing: 0.05em;
    color: var(--footer-text-color);
    font-size: var(--footer-spacing-md);
    font-weight: 400;
    line-height: 1.2;
    text-transform: uppercase;
  }

  .coordinate-line {
    margin-bottom: var(--footer-spacing-xs);
  }

  .coordinate-value {
    display: inline-block;
    min-width: 3.5rem;
    text-align: left;
    font-weight: 500;
  }

  .location-text {
    color: var(--footer-text-color);
    font-size: var(--footer-spacing-md);
    font-weight: 400;
    line-height: 1.2;
    letter-spacing: -0.025em;
    text-transform: uppercase;
  }

  .location-text p {
    margin: 0;
  }

  /* Social Links */
  .social-links {
    display: flex;
    flex-direction: column;
    gap: var(--footer-spacing-sm);
  }

  .social-link {
    color: var(--footer-text-color);
    text-decoration: none;
    font-size: var(--footer-spacing-md);
    transition: var(--footer-transition);
    display: flex;
    align-items: center;
    gap: var(--footer-spacing-sm);
    padding: 0.25rem 0;
    border-radius: 0.25rem;
  }

  .social-link:hover {
    opacity: 0.7;
    transform: translateX(4px);
  }

  .social-link:focus-visible {
    outline: var(--footer-focus-width) solid var(--footer-focus-color);
    outline-offset: 2px;
  }

  .social-icon {
    flex-shrink: 0;
    transition: var(--footer-transition);
  }

  .social-link:hover .social-icon {
    transform: scale(1.1);
  }

  .social-text {
    white-space: nowrap;
  }

  /* Footer Navigation */
  .footer-nav {
    display: flex;
    justify-content: flex-end;
    gap: var(--footer-spacing-lg);
    margin-bottom: var(--footer-spacing-lg);
    padding-top: var(--footer-spacing-lg);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .footer-nav a {
    color: var(--footer-text-color);
    text-decoration: none;
    font-size: var(--footer-spacing-md);
    font-weight: 500;
    letter-spacing: 0.05em;
    transition: var(--footer-transition);
    padding: var(--footer-spacing-sm);
    border-radius: 0.25rem;
  }

  .footer-nav a:hover {
    opacity: 0.7;
    transform: translateY(-1px);
  }

  .footer-nav a:focus-visible {
    outline: var(--footer-focus-width) solid var(--footer-focus-color);
    outline-offset: 2px;
  }

  .footer-nav a[aria-current='page'] {
    font-weight: 700;
    opacity: 1;
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    .location-info {
      gap: 2rem;
      margin-top: 3rem;
    }
  }

  @media (max-width: 768px) {
    footer {
      padding: var(--footer-spacing-lg) var(--footer-spacing-md) 0;
    }

    .footer-content {
      flex-direction: column;
      gap: var(--footer-spacing-lg);
    }

    .footer-tagline {
      font-size: 2.5rem;
      letter-spacing: -0.05em;
    }

    .location-info {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--footer-spacing-md);
      margin-top: var(--footer-spacing-lg);
    }

    .footer-nav {
      justify-content: center;
      flex-wrap: wrap;
      gap: var(--footer-spacing-md);
    }
  }

  @media (max-width: 480px) {
    .footer-nav {
      flex-direction: column;
      align-items: center;
      gap: var(--footer-spacing-sm);
    }

    .location-info {
      gap: var(--footer-spacing-sm);
    }

    .social-links {
      gap: 0.75rem;
    }
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .work-with-me:hover,
    .social-link:hover,
    .footer-nav a:hover {
      transform: none;
    }

    .social-link:hover .social-icon {
      transform: none;
    }

    * {
      transition: none !important;
      animation: none !important;
    }
  }

  /* High Contrast Mode */
  @media (prefers-contrast: high) {
    :root {
      --footer-focus-color: yellow;
    }

    .coordinate-value {
      color: var(--footer-text-color);
      font-weight: 600;
    }
  }
</style>
